webpackJsonp([9],{"9bGG":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){var e,o,i;r(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return e=o=a(this,t.call.apply(t,[this].concat(c))),o.state={isHovering:!1},o.handlers={onMouseOver:function e(){return o._setHover(!0)},onMouseLeave:function e(){return o._setHover(!1)}},i=e,a(o,i)}return o(n,t),n.prototype.componentDidMount=function e(){h(this)},n.prototype.componentWillUnmount=function e(){this.hoverTimer&&clearTimeout(this.hoverTimer),v(this)},n.prototype._setHover=function e(t){var n=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=t&&p?setTimeout(function(){return n._setHover(t)},u):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},l)},n.prototype.render=function t(){return s.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))},n}(s.Component)}t.a=i;var s=n("d6ZO"),c=n.n(s),l=32,u=100,d=null,p=!1,m=[],f=function e(){d&&clearTimeout(d),p=!0,d=setTimeout(function(){p=!1},u)},h=function e(t){0===m.length&&window.addEventListener("scroll",f),m.push(t)},v=function e(t){var n=m.indexOf(t);m.splice(n,1),0===m.length&&window.removeEventListener("scroll",f)}},BIKA:function(e,t){},Hdz3:function(e,t,n){"use strict";function r(){return o.a.createElement("div",{className:"NewsConversationsDropdown"},o.a.createElement("div",{className:"content"},o.a.createElement(s.b,null,function(e){return o.a.createElement(i.a,{requestContext:e})})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n("d6ZO"),o=n.n(a),i=n("lVil"),s=n("dZgC")},NfjA:function(e,t,n){"use strict";function r(e){m.a.instance().handleConnect(e,!0,{})}function a(e){var t,n=e.network,a=(t={},t[h]=l.a._("Find friends from Facebook"),t[v]=l.a._("Find friends from Google+"),t[g]=l.a._("Find friends from Twitter"),t[b]=l.a._("Find friends from Yahoo"),t);return i.a.createElement("div",{className:"socialConnect",role:"listitem"},i.a.createElement(f.P,{onTouch:function e(){return r(n)},fullWidth:!1},i.a.createElement("div",{className:"socialConnectItem"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:c()("icon","socialConnect-"+n)},i.a.createElement("em",null))),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"title"},a[n])))))}t.a=a;var o=n("d6ZO"),i=n.n(o),s=n("GGB8"),c=n.n(s),l=n("W/Cr"),u=n("IaRT"),d=n.n(u),p=n("Svvu"),m=n("cD7N"),f=n("gEaE"),h=p.a.FACEBOOK,v=p.a.GPLUS,g=p.a.TWITTER,b=p.a.YAHOO},PrM5:function(e,t,n){"use strict";function r(e){var t;return t={},t[a]={connected:!!e.facebook_url,url:e.facebook_url},t[i]={connected:e.connected_to_google||!1},t[s]={connected:e.connected_to_youtube||!1},t[c]={connected:!!e.gplus_url,url:e.gplus_url},t[l]={connected:e.connected_to_microsoft||!1},t[o]={connected:!!e.twitter_url,url:e.twitter_url},t[u]={connected:e.connected_to_etsy||!1},t[d]={connected:e.connected_to_instagram||!1},t}t.a=r;var a="facebook",o="twitter",i="google",s="youtube",c="gplus",l="microsoft",u="etsy",d="instagram"},Svvu:function(e,t,n){"use strict";function r(){}var a=n("hlP+"),o=n.n(a),i=n("BVzu"),s=n("XZ9g"),c=n.n(s),l=n("/4D9"),u=n.n(l),d=n("W/Cr"),p=n("DLm7"),m=n("EAiy"),f=void 0;Object.assign(r.prototype,o.a),Object.assign(r.prototype,{connect:function e(t,n){var r=this;(n=Object.assign({},{success:function e(){},error:function e(){},complete:function e(){}},n)).rerequest_facebook_email?u()().then(function(e){e.default.ensureInit(function(e){e.login(function(e){var t=e.authResponse,r=void 0,a=void 0;t&&(r=(r=t.grantedScopes)?r.split(","):[],a=t.userID);var o=r.find(function(e){return"email"===e}),i={id:a};"connected"===e.status&&o?n.success(i):n.error(i),n.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},m.a)}):c()().then(function(e){var a=e.default.getWindowOptions(),o=window.open("/connect/"+t+"/","",a);if(!o)return i.a.showError(d.a._("You must enable popups!")),void n.error({network:t,alertedUpstream:!0});var s=p.a.setInterval(function(){o.closed&&(clearInterval(s),r.handleComplete({network:t,error_message:"Window closed."}))},1e3);r.once("connect:"+t,function(e){clearInterval(s),e.error_message?n.error(e):n.success(e),n.complete()})})},complete:function e(t){this.handleComplete(t)},handleComplete:function e(t){var n="connect:"+t.network;if("facebook"===t.network){var r=t.id;r&&"string"!=typeof r&&(t.error_message="Facebook id must be of string type")}this.trigger(n,t)}}),Object.assign(r,{instance:function e(){return f||(f=new r),f},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&r.instance().complete(e.data)}),t.a=r},T0l7:function(e,t,n){"use strict";function r(e,t){return u.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function a(e,t){return u.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function o(e,t){return function(n){return u.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(function(){s.a.trackEvent(m,"success"),c.a.instance.publish(e,"boardApprovedCollaboratorInvite",{userId:t})}).catch(function(){return s.a.trackEvent(m,"error")})}}function i(e,t,n){return function(r){var a=e.invited_user,o=e.status,i=e.board.id;return u.a.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:i,field_set_key:"boardEdit",invited_user_id:a.id}).callDelete({showError:!1}).then(function(){c.a.instance.publish(i,"boardWriteAccessUpdated"),n&&c.a.instance.publish(i,"boardBannedCollaborator"),t&&(c.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),c.a.instance.publish(i,"boardRemovedCollaboratorSelf"))})}}t.c=r,t.d=a,t.a=o,t.b=i;var s=n("/e0Y"),c=n("Cjb7"),l=n("ZtCB"),u=n.n(l),d=n("jUQw"),p=n.n(d),m="collaborator_approve_invite"},U7FU:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}}var s=n("d6ZO"),c=n.n(s),l=n("DUIN"),u=n("GGB8"),d=n.n(u),p=n("IaRT"),m=n.n(p),f=n("gEaE"),h=3,v=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],g=function e(t,n){var r=t.name,a=t.image_thumbnail_url;return c.a.createElement("div",{className:d()("Image","Module","boardMessageRep",n)},c.a.createElement("img",{alt:r,src:a}))},b=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],a=arguments[3],o={small:"sm",medium:"md",normal:"lg"};return c.a.createElement(f.b,{display:"flex",alignItems:"center"},c.a.createElement(f.l,{collaborators:r.map(function(e,t){return{name:e.full_name||e.email||e.username||"user "+t,src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:o[t]}))},y=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.getUsersToShow=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return void 0!==r&&(n=n.filter(function(e){return e.id!==r})),n.concat(t.map(function(e){return{full_name:e,first_name:e,username:e}})).slice(0,3)},t.prototype.render=function e(){var t=this.props,n=t.board,r=t.emails,a=t.shouldLink,o=t.size,i=t.users,s=this.getUsersToShow(r,i),c=s.length<=3?v[s.length-1]:[];return n?g(n,o):s.length>0?b(o,c,s,a):null},t}(s.Component);y.defaultProps={shouldLink:!1,size:"medium"},t.a=Object(l.connect)(i)(y)},XSNT:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("d6ZO"),s=n.n(i),c=n("IaRT"),l=n.n(c),u=function(e){function t(n,o){r(this,t);var i=a(this,e.call(this,n,o));return i.handleChange=function(e){i.props.onChange&&i.props.onChange(e.target.value),i.setState({value:e.target.value,hasChanged:!0})},i.state={isFocused:i.props.focused||!1,value:i.props.value,hasChanged:void 0!==i.props.value},i}return o(t,e),t.prototype.componentDidMount=function e(){this.state.isFocused&&this._input.focus()},t.prototype.UNSAFE_componentWillReceiveProps=function e(t){this.setState({value:t.value})},t.prototype.getId=function e(){return this.props.id},t.prototype.getValue=function e(){return this.state.value},t.prototype.focus=function e(){this._input.focus()},t.prototype.render=function e(){var t=this;return s.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function e(n){t._input=n},style:this.props.style,type:this.props.type,value:this.state.value||""})},t}(i.Component);t.a=u,u.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(28).then(function(t){e(n("RNIf"))}.bind(null,n)).catch(n.oe)})}},cD7N:function(e,t,n){"use strict";function r(){}var a=n("Cjb7"),o=n("ZtCB"),i=n.n(o),s=n("Svvu"),c=n("DLm7"),l=n("EAiy"),u=1e3,d=110;Object.assign(r.prototype,{handleConnect:function e(t,n,r){if(n&&!l.a.isLimitedLogin()){var a={success:function(e){var a={network:t,data:e};this._internalConnectNetwork(n,a,r)}.bind(this),error:function e(t){r.error&&r.error(t)},complete:function e(){r.complete&&r.complete()}};this._externalConnectNetwork(t,n,a)}else{var o={network:t};this._internalConnectNetwork(n,o,r)}},updateConnectStatus:function e(){i.a.create("UserResource",{user_id:l.a.get("id"),username:l.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;l.a.set(t),a.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){n?s.a.instance().connect(t,r):r.success&&r.success({})},_internalConnectNetwork:function e(t,n,r){var a=this,o=i.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){a.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).fin(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case s.a.FACEBOOK:n="UserFacebookFriendsResource";break;case s.a.TWITTER:n="UserTwitterFriendsResource";break;case s.a.GOOGLE:n="UserGmailFriendsResource";break;case s.a.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var o={resource:n,network:t,error:r};a.a.instance.publish("site","friendImportCompleted",o)},pollForFriends:function e(t,n){var r=this,a=(n=n||{}).resourceOptions||{},o=this._getResourceNameForNetworkFriends(t);if(o){var s=i.a.create(o,a);s.callGet({showError:!1}).then(function(){var e=n.success;e&&e(s),r._handleFriendsImported(t,s,null)},function(e){if(110===e.api_error_code)c.a.setTimeout(function(){r.pollForFriends(t,n)},1e3);else{var a=n.error;a&&a(),r._handleFriendsImported(t,s,e)}})}}});var p=null;r.instance=function(){return p||(p=new r),p},t.a=r},fvzG:function(e,t,n){"use strict";function r(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function i(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function c(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}}function u(){return function(e){h.a.create("ConversationBadgeResource",{}).callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}}function d(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function p(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}function m(e,t,n){var r=void 0,a=new Promise(function(o){(r=function r(a,i){function c(){var t=h.a.create("ConversationMessagesResource",{conversation_id:e,text:l,pin:u,board:m,user:f,user_did_it_data:g,source:n}),r=""+v();t.callCreate().then(function(t){a(p(e,r,t.resource_response.data.id))}),a(d(e,{text:l,sender:b.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:r,board:null,event_type:null,pin:u?b.pins[u]:null,type:"message",user_did_it_data:null,user:null})),o()}var l=t.text,u=t.pinId,m=t.boardId,f=t.userId,g=t.didItId,b=i();b.conversations.data[e]?c():h.a.create("ConversationResource",{conversation_id:e}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;a(s(t)),c()})}).getPromise=function(){return a}});return r}t.h=r,t.e=a,t.g=o,t.b=i,t.c=s,t.d=c,t.f=l,t.a=u,t.k=d,t.j=p,t.i=m;var f=n("ZtCB"),h=n.n(f),v=function(){var e=0;return function(){return e++}}()},jUQw:function(e,t){},lVil:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.contactRequests,n=e.requestContext;if(!t)return null;var r=t.filter(function(e){var t=e.board;return t&&t.name&&t.url}),a=!0;if(n){var o=new F.c(n,"web_inbox_collab_invites");a=r.length>0&&o.enabled()}return a?j.a.createElement("div",null,r.map(function(e,t){return j.a.createElement("div",{key:e.id},0!==t?j.a.createElement(U.j,null):null,j.a.createElement(P,e))})):null}function s(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick;if(!t&&!n)return null;var a=void 0;return a=t>Q?A.a._("1000+ contact requests","messaging"):t>=J&&t<=Q?A.a._("100+ contact requests","messaging"):x.h(A.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:""+t}),j.a.createElement(U.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:10,paddingRight:10}},paddingY:1},j.a.createElement("div",{className:"Module ContactRequestsCount"},j.a.createElement(Z.a,{className:K()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:a,type:"borderless"})))}function c(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?j.a.createElement("div",{className:"Module ContactRequestsCount"},j.a.createElement($,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),j.a.createElement(U.b,{padding:2},j.a.createElement(U.K,{size:"sm"},A.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return j.a.createElement("div",{key:e.id},0!==t?j.a.createElement(U.j,null):null,j.a.createElement(P,e))})):null}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){var t=e.name,n=e.emails,r=e.users,a=e.viewerId,o=r.filter(function(e){return e.id!==a});return j.a.createElement(U.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||o.map(function(e){return e.first_name||e.full_name}).concat(n).join(", "))}function m(e){var t=e.message,n=e.viewerId,r=t.board,a=t.created_at,o=t.pin,i=t.sender,s=t.text,c=t.user,l=s,u=i.id===n,d=u?A.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):i.first_name;return l?l&&u&&(l=A.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+l):o?l=x.h(A.a._("{{ senderName }} sent a Pin","messaging"),{senderName:d}):r?l=x.h(A.a._("{{ senderName }} sent a board","messaging"),{senderName:d}):c&&(l=x.h(A.a._("{{ senderName }} sent a user profile","messaging"),{senderName:d})),j.a.createElement(U.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},j.a.createElement(U.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},j.a.createElement(U.K,{color:"darkGray",size:"sm",truncate:!0},l)),j.a.createElement(U.b,{flex:"none"},j.a.createElement(U.K,{color:"gray",size:"xs",truncate:!0},A.a.getHumanizedTimesince(a,!0))))}function f(e){var t=e.board,n=e.pin,r=e.user,a=null;if(n){var o=n.images["236x"]||n.images["136x136"];a=j.a.createElement(U.u,{shape:"rounded",wash:!0,height:60,width:40},j.a.createElement(U.p,{alt:"",src:o.url,naturalWidth:o.width,naturalHeight:o.height,color:n.dominant_color,fit:"cover"}))}else t?a=j.a.createElement(U.u,{shape:"rounded",width:40,height:40},j.a.createElement(U.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(a=j.a.createElement(U.b,{shape:"rounded",width:40,height:40},j.a.createElement(U.a,{name:r.full_name,src:r.image_large_url})));return a?j.a.createElement(U.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},j.a.createElement(U.b,{display:"block"},a)):null}function h(e){return{viewerId:e.viewer.id}}function v(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,a=e.handleContactWrapperClick,o=e.isSelected,i=e.isUser,s=["selectionIndicator","contactCircleRep","selectionIndicator"];return j.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return a(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},le(n,r),o?j.a.createElement("div",{className:s.join(" ")},j.a.createElement("em",null)):null)}function g(e){var t=e.onClickRemove,n=e.tokenizedItems;return R.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},R.createElement("div",{className:"tokenContainer"},n.map(function(e,n){return R.createElement("div",{className:"tokenItem",key:n,style:{position:"relative"}},R.createElement(Z.a,{className:"tokenRemove",onClick:function e(){return t(n)},showText:!1,text:A.a._("close conversation chathead"),type:"borderless"},R.createElement(U.b,{position:"absolute",color:"lightGray",display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,dangerouslySetInlineStyle:{__style:{borderRadius:6}}},R.createElement(U.n,{icon:"cancel",accessibilityLabel:"",size:5,color:"darkGray"}))),"string"!=typeof e?R.createElement(U.a,{size:"sm",name:e.full_name,src:e.is_default_image?void 0:e.image_large_url}):R.createElement(U.a,{size:"sm",name:e}))}),n.length>0?R.createElement(U.b,{width:5}):null),R.createElement("div",{className:"textFieldContainer"}))}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e){var t=e.boardInvites,n=e.boardJoinRequests;return t||n?j.a.createElement("div",null,n?n.map(function(e){return j.a.createElement(U.b,{key:e.id},j.a.createElement(ve,{boardInviteItem:e}),j.a.createElement(U.j,null))}):null,t?t.map(function(e){return j.a.createElement(U.b,{key:e.id},j.a.createElement(ve,{boardInviteItem:e}),j.a.createElement(U.j,null))}):null):null}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var R=n("d6ZO"),j=n.n(R),T=n("DUIN"),x=n("5tOk"),A=n("W/Cr"),B=n("ZtCB"),L=n.n(B),D=n("fvzG"),U=n("gEaE"),M=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=a(this,e.call.apply(e,[this].concat(c))),o.state={contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteAcceptResponse=function(){o.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),L.a.create("ContactRequestAcceptResource",{contact_request:o.props}).callUpdate().then(function(e){var t=o.props.dispatch;if(o.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var n=e.resource_response.data;t(Object(D.c)(n)),t(Object(D.h)(n.id)),t(Object(D.g)(n.id))}})},o.handleInviteDeclineResponse=function(){o.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),L.a.create("ContactRequestIgnoreResource",{contact_request:o.props}).callDelete().then(function(){o.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})},i=n,a(o,i)}return o(t,e),t.prototype.renderRequestText=function e(t,n,r){if(t){var a=t.name,o=t.url;if(a&&o)return x.h(A.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:a.toString(),boardUrl:o.toString(),senderName:n,senderUsername:r})}return x.h(A.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})},t.prototype.renderAcceptedBoard=function e(){var t=this.props.board;if(!t)return null;var n=t.name,r=t.url,a=t.image_thumbnail_url;return j.a.createElement(U.t,{href:r},j.a.createElement(U.b,{paddingX:2,paddingY:4,display:"flex"},j.a.createElement(U.u,{shape:"rounded",width:50,height:50},j.a.createElement(U.p,{alt:n,src:a,naturalHeight:60,naturalWidth:60})),j.a.createElement(U.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},j.a.createElement(U.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},n),j.a.createElement(U.K,{color:"darkGray",size:"sm"},A.a._("You joined this board","Status message for a group board the user has joined.")))))},t.prototype.render=function e(){var t=this.props,n=t.board,r=t.sender,a=this.state,o=a.contactRequestCompleted,i=a.isAccepted,s=a.isAcceptButtonLoading,c=a.isIgnoreButtonLoading;if(o)return n&&i?this.renderAcceptedBoard():null;var l=r.image_large_url,u=r.full_name,d=r.username;return j.a.createElement(U.b,{paddingX:2,paddingY:4,display:"flex"},j.a.createElement(U.b,{height:40,width:40,flex:"none"},j.a.createElement(U.t,{href:"/"+d+"/"},j.a.createElement(U.a,{name:d,src:l}))),j.a.createElement(U.b,{paddingX:3,flex:"grow"},j.a.createElement(U.b,{marginBottom:3},j.a.createElement(U.K,null,j.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(n,u,d)}}))),j.a.createElement(U.b,{display:"flex",marginLeft:-1,marginRight:-1},j.a.createElement(U.b,{paddingX:1,flex:"grow"},j.a.createElement(U.c,{disabled:c,onClick:this.handleInviteDeclineResponse,size:"sm",text:A.a._("Decline","ignore contact request")})),j.a.createElement(U.b,{paddingX:1,flex:"grow"},j.a.createElement(U.c,{color:"red",disabled:s,onClick:this.handleInviteAcceptResponse,size:"sm",text:A.a._("Accept","accept contact request")})))))},t}(R.PureComponent),P=Object(T.connect)()(M),q=n("pN+K"),F=n("+B8E"),H=n("BIKA"),W=n.n(H),V=n("oroX"),z=Object(q.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(i),G=n("GGB8"),K=n.n(G),Z=n("nM9s"),Y=n("IaRT"),X=n.n(Y),J=100,Q=1e3,$=Object(q.b)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(s),ee=Object(q.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(c),te=n("U7FU"),ne=n("tmfO"),re=n("Kqaz"),ae=n("/S3G"),oe=n("MQ2h"),ie=n.n(oe),se=function(e){function t(){var n,r,a;l(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=u(this,e.call.apply(e,[this].concat(i))),r.state={isAnimatingOut:!1,unread:r.props.data.unread||0},r.handleHideConversation=function(e){e.stopPropagation();var t=r.props,n=t.data,a=t.dispatch,o=n.id;L.a.create("ConversationResource",{conversation_id:o}).callDelete({showError:!1}),r.setState({isAnimatingOut:!0}),setTimeout(function(){a(Object(D.d)(o))},500),r.removeConversationChatHead(o),r.logConversationItemHide(o)},r.handleConversationItemClick=function(){var e=r.props.data;r.setState({unread:0}),e.board||r.showConversationChatHead(e),r.logConversationItemClick()},r.logConversationItemClick=function(){(0,r.props.contextLog)(101,{component:54,element:277})},r.logConversationItemHide=function(e){(0,r.props.contextLog)(182,{component:54,element:277,conversation_id:e})},a=n,u(r,a)}return d(t,e),t.prototype.showConversationChatHead=function e(t){var n=this.props.dispatch,r=t.id;n(Object(D.h)(r)),n(Object(D.g)(r)),n(ae.a)},t.prototype.removeConversationChatHead=function e(t){var n=this.props.dispatch;n(Object(D.e)(t)),n(Object(D.b)(t))},t.prototype.renderItemContent=function e(){var t=this.state.isAnimatingOut,n=this.props,r=n.data,a=n.viewerId,o=r.board,i=r.emails,s=r.last_message,c=r.name,l=r.users,u=i||[];return j.a.createElement("div",{className:K()("ConversationListItemReact",{conversationHidden:t})},j.a.createElement(U.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},j.a.createElement(te.a,{board:o,emails:u,users:l})),j.a.createElement(U.b,{display:"flex",width:"85%",height:"100%"},j.a.createElement(U.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},j.a.createElement(p,{name:c,emails:i||[],users:l,viewerId:a}),j.a.createElement(U.b,{flex:"grow",display:"flex",direction:"column"},s?j.a.createElement(m,{message:s,viewerId:a}):null)),s?j.a.createElement(f,s):null),this.state.unread>0?j.a.createElement("span",{className:"conversationUnreadMark"}):null,j.a.createElement(Z.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:A.a._("×","close button"),type:"borderless"}))},t.prototype.render=function e(){var t=this.props.data,n=t.board,r=t.users;return r&&r.length?n?j.a.createElement(ne.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):j.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null},t}(R.Component),ce=Object(oe.compose)(Object(T.connect)(h),re.a)(se),le=function e(t,n){var r=n.emails,a=n.users,o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return j.a.createElement("div",{className:"contactWrapper"},j.a.createElement(te.a,{emails:[n],size:"small"}),j.a.createElement("div",{className:"contactTextInfo"},j.a.createElement("span",{className:"contactName"},n),j.a.createElement("span",{className:"contactDescription"},A.a._("Email friend","on selected contact list"))))}},i=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=n[0].id===t?n[1]:n[0],a=r.full_name;return j.a.createElement("div",{className:"contactWrapper"},j.a.createElement(te.a,{size:"small",users:[r]}),j.a.createElement("div",{className:"contactTextInfo"},j.a.createElement("span",{className:"contactName"},a),j.a.createElement("span",{className:"contactDescription"},A.a._("On Pinterest","info about a contact"))))};return j.a.createElement("div",null,r&&r.length>0?o(r):i(a))};v.defaultProps={isSelected:!1};var ue=n("tZWC"),de=8,pe=2,me=function(e){function t(){var n,r,a;b(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=y(this,e.call.apply(e,[this].concat(i))),r.state={contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""},r.onHandleContactClick=function(e,t){var n=r.state,a=n.selectedEmails,o=n.selectedUsers,i=e?o:a,s=e?t.id:t,c=i[s];i[s]=!c,c?r.removeTokenItem(t):r.addTokenItem(t)},r.getSelectedEmails=function(){var e=r.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})},r.getSelectedUsers=function(){var e=r.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})},r.handleTypeaheadKeyDown=function(e){var t=r.state,n=t.contactCounter,a=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,s=t.value;if(e.keyCode===de&&n&&!s){var c=i.pop(),l=!!c.id,u=c.id||c;(l?o:a)[u]=!1,r.setState({contactCounter:n-1,tokenizedItems:i})}},r.handleInviteItemClick=function(e,t){var n=r.state,a=n.selectedUsers,o=n.selectedEmails,i=t?a:o,s=e.id||e;i[s]||(i[s]=!0,r.addTokenItem(e))},r.handleRemoveItem=function(e){var t=r.state.tokenizedItems[e];r.removeTokenItem(t)},r.handleSendMessage=function(){var e=r.getSelectedEmails(),t=r.getSelectedUsers(),n=r.props.dispatch;L.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;n(Object(D.c)(t)),n(Object(D.h)(t.id)),n(Object(D.g)(t.id))})},r.addTokenItem=function(e){var t=r.state,n=t.contactCounter,a=t.tokenizedItems;r.setState({contactCounter:n+1,tokenizedItems:a.concat([e]),value:""})},r.removeTokenItem=function(e){var t=r.state,n=t.contactCounter,a=t.tokenizedItems,o=t.selectedUsers,i=t.selectedEmails,s=!!e.id,c=e.id||e;(s?o:i)[c]=!1,e.id?r.setState({contactCounter:n-1,tokenizedItems:a.filter(function(t){return t.id!==e.id})}):r.setState({contactCounter:n-1,tokenizedItems:(a||[]).filter(function(t){return t!==e})})},r.renderSendMessageButton=function(){return j.a.createElement(Z.a,{className:"sendNewMessageButton",hasText:!0,onClick:r.handleSendMessage,showText:!0,text:A.a._("Next","open the new chat"),type:"borderless"})},r.renderCancelMessageButton=function(){var e=r.props.handleCancelNewMessageClick;return j.a.createElement(Z.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:A.a._("Cancel","cancel new message view"),type:"borderless"})},a=n,y(r,a)}return E(t,e),t.prototype.getContactItem=function e(t,n,r){var a=t.emails,o=t.users;return r&&o?o[0].id===n?o[1]:o[0]:a[0]},t.prototype.render=function e(){var t=this,n=this.props,r=n.conversationItems,a=n.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,c=o.selectedEmails,l=o.value,u=new Set,d=r.map(function(e,n){var r=e.emails,o=e.users;r||(r=[]),o||(o=[]);var i=o.length+r.length;if(i>0&&i<=2){var l=0===r.length,d=t.getContactItem(e,a,l);if(d){var p=d.id||d;if(!u.has(p))return u.add(p),j.a.createElement(v,{className:"conversationContactContainer",contactItem:d,conversationItem:e,currentUserID:a,handleContactWrapperClick:t.onHandleContactClick,isSelected:s[p]||c[p],isUser:l,key:p+"-"+n})}}return null});return j.a.createElement("div",null,j.a.createElement(U.b,{display:"flex",justifyContent:"between",padding:3},j.a.createElement(U.K,{size:"sm",color:"gray"},A.a._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),j.a.createElement(U.b,{color:"lightGray",display:"flex",padding:3},j.a.createElement(U.b,{display:"flex",alignItems:"center",marginRight:2},j.a.createElement(U.K,{size:"sm"},A.a._("To:","new message"))),j.a.createElement(U.b,{display:"flex",position:"relative",flex:"grow"},j.a.createElement(g,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),j.a.createElement(ue.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function e(n){return t.setState({value:n})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),l?null:j.a.createElement("div",{className:"contactsContainer"},d))},t}(R.Component),fe=function e(t){return{viewerId:t.viewer.id}},he=Object(oe.compose)(Object(T.connect)(fe))(me),ve=function(e){function t(){var n,r,a;_(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=w(this,e.call.apply(e,[this].concat(i))),r.state={boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},r.handleInviteResponse=function(e){var t=r.props.boardInviteItem,n=t.board,a=void 0===n?{}:n,o=t.invited_user,i=void 0===o?{}:o;r.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:a.id,invited_user_id:i.id},c=L.a.create("BoardInviteResource",s);(e?c.callUpdate():c.callDelete()).then(function(){r.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})},a=n,w(r,a)}return C(t,e),t.prototype.getBoardRep=function e(t,n){return j.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},j.a.createElement("div",{className:"Image Module boardMessageRep"},j.a.createElement("div",{className:"heightContainer"},j.a.createElement("img",{alt:t,src:n}))))},t.prototype.getBoardInfo=function e(t,n){return j.a.createElement("a",{href:n},j.a.createElement("div",{className:t},t))},t.prototype.getInviteeInfo=function e(t){var n=t.full_name;return j.a.createElement("div",{className:"inviterLine"},Object(x.h)(A.a._("{{ fullName }} invited you to this board"),{fullName:n}))},t.prototype.getRequesterInfo=function e(t){var n=t.username,r=t.full_name,a=Object(x.h)(A.a._('<a href="/{{ username }}/">{{ fullName }}</a> wants to join your board'),{fullName:r,username:n});return j.a.createElement("div",{className:"requesterLine"},j.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))},t.prototype.getJoinedText=function e(t){var n=t.username,r=t.full_name,a=Object(x.h)(A.a._('<a href="/{{ username }}/">{{ fullName }}</a> joined your board'),{fullName:r,username:n});return j.a.createElement("div",{className:"requesterLine"},j.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))},t.prototype.renderPendingLayout=function e(t,n,r){var a=this,o=t.image_thumbnail_url,i=t.name,s=t.url,c=r?s+"invite":s;return j.a.createElement("div",{className:"pending"},j.a.createElement("div",{className:"left"},this.getBoardRep(i,o),j.a.createElement("div",{className:"description"},this.getBoardInfo(i,c),r?this.getRequesterInfo(n):this.getInviteeInfo(n))),j.a.createElement("div",{className:"actions"},j.a.createElement(Z.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return a.handleInviteResponse(!1)},text:A.a._("Decline","decline board collaborator invite or request")}),j.a.createElement(Z.a,{className:K()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return a.handleInviteResponse(!0)},text:A.a._("Accept","accept board invite")})))},t.prototype.renderCompletedLayout=function e(t,n,r){var a=t.image_thumbnail_url,o=t.name,i=t.url;return j.a.createElement("div",{className:"success displayed"},j.a.createElement("div",{className:"left"},this.getBoardRep(o,a),j.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),j.a.createElement("div",{className:"inviterLine"},r?this.getJoinedText(n):A.a._("You joined this board","board invites")))))},t.prototype.render=function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user,a=t.invited_user,o=r.id===a.id;return j.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r,o):this.renderCompletedLayout(n,r,o))},t}(R.Component),ge=X.a.shape({board:X.a.shape({image_thumbnail_url:X.a.string,name:X.a.string,url:X.a.string}),id:X.a.string.isRequired,invited_by_user:X.a.shape({id:X.a.string,full_name:X.a.string,username:X.a.string}),invited_user:X.a.shape({id:X.a.string})}),be=Object(oe.compose)(Object(q.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(q.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(I),ye=n("dZgC"),Ee=n("nX0T"),_e=500,we="existingConversationsView",Ce="newMessageView",Ie="contactRequestsView",Oe=function(e){function t(){var n,r,a;O(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=N(this,e.call.apply(e,[this].concat(i))),r.state={currentView:we,hoverColor:"transparent"},r.handleCancelSecondaryView=function(){r.setState({currentView:we})},r.handleNewMessageButtonClick=function(){r.setState({currentView:Ce}),r.logNewMessageButtonClick()},r.handleViewContactRequestsClick=function(){r.setState({currentView:Ie})},r.handleScroll=function(){r.props.isFetching||(r._container&&r._container.scrollHeight-r._container.scrollTop-r._container.clientHeight)<_e&&r.fetchMore()},r.handleMouseHoverSVG=function(){r.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})},r.handleMouseLeaveSVG=function(){r.setState({hoverColor:"transparent"})},r.logNewMessageButtonClick=function(){(0,r.props.contextLog)(101,{component:54,element:275})},a=n,N(r,a)}return k(t,e),t.prototype.componentDidMount=function e(){var t=this.props,n=t.isFullAuth,r=t.contextLog;n&&this._container.addEventListener("scroll",this.handleScroll),r(7161,{})},t.prototype.componentWillUnmount=function e(){this._container.removeEventListener("scroll",this.handleScroll)},t.prototype.fetchMore=function e(){var t=this.props,n=t.isAtEnd,r=t.isFetching,a=t.fetchMoreData,o=t.isFullAuth;!r&&o&&(n?this._container.removeEventListener("scroll",this.handleScroll):a())},t.prototype.renderNewMessageView=function e(){var t=this.props.conversations,n=void 0===t?[]:t;return j.a.createElement("div",{className:"newMessageContainer"},j.a.createElement(he,{conversationItems:n,handleCancelNewMessageClick:this.handleCancelSecondaryView}))},t.prototype.renderContactRequestsView=function e(){return j.a.createElement("div",{className:"contactRequestsContainer"},j.a.createElement(ee,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))},t.prototype.renderEmptyMessagesNewMessageUpsell=function e(){return j.a.createElement("div",{className:"EmptyConversations Module"},j.a.createElement("div",{className:"icon"}),j.a.createElement("div",{className:"intro"},j.a.createElement("div",null,A.a._("Send messages to your friends!")),j.a.createElement("div",null,A.a._("Plan projects, swap ideas and share your best discoveries."))))},t.prototype.renderExistingConversationsView=function e(){var t=this.props,n=t.conversations,r=void 0===n?[]:n,a=t.isAtEnd;return j.a.createElement("div",{className:"existingConversationsContainer"},j.a.createElement(U.b,{position:"relative"},j.a.createElement(U.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},j.a.createElement(U.o,{onClick:this.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:A.a._("composeNewMessage","accessibility label for compose icon button")})),j.a.createElement(U.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},j.a.createElement(U.K,{bold:!0,size:"md",align:"center"},A.a._("Messages","header text for conversations dropdown")))),j.a.createElement("div",{className:"viewContactRequestsButtonContainer"},j.a.createElement($,{onClick:this.handleViewContactRequestsClick})),j.a.createElement("div",{className:"existingConversationItemsWrapper"},j.a.createElement("div",{className:"boardInvitesContainer"},j.a.createElement(be,null)),j.a.createElement("div",{className:"boardInviteContactRequestsContainer"},j.a.createElement(ye.b,null,function(e){return j.a.createElement(z,{requestContext:e})})),j.a.createElement("ul",{className:"conversationItems"},0===r.length&&a?this.renderEmptyMessagesNewMessageUpsell():r.map(function(e,t){return j.a.createElement("li",{className:"conversationItemWrapper",key:e.id},j.a.createElement(ce,{data:e}),t<r.length-1?j.a.createElement(U.j,null):null)}))))},t.prototype.renderMessageView=function e(){switch(this.state.currentView){case we:return this.renderExistingConversationsView();case Ce:return this.renderNewMessageView();case Ie:return this.renderContactRequestsView()}},t.prototype.render=function e(){var t=this;return j.a.createElement(Ee.a,{view:42,viewParameter:203},j.a.createElement("div",{className:"conversationPanel",ref:function e(n){t._container=n}},this.renderMessageView()))},t}(R.Component),Ne=function e(t){return Object.keys(t).map(function(e){return t[e]})},ke=function e(t){var n=t.conversations,r=t.viewer;return{conversations:S(Ne(n.data)),isFullAuth:r.isAuth&&!r.isLimitedLogin}},Se=t.a=Object(oe.compose)(Object(T.connect)(ke),re.a,Object(q.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}))(Oe)},"pN+K":function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return Object(m.a)("function"==typeof e?e(t):e||{})}function c(e){return e?e.WrappedComponent?e.WrappedComponent.name||"unknown":e.displayName?e.displayName:e.name?e.name:"unknown":"null-subject"}function l(e){var t=e.name,n=e.options;return Object(p.connect)(C({name:t,options:n||{}}))}t.a=s,t.c=l;var u=n("d6ZO"),d=n.n(u),p=n("DUIN"),m=n("lJK6"),f=n("FfPm"),h=n("IaRT"),v=n.n(h),g=n("S+Qs"),b=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)},y=function e(t){var n={};return function(e){return function(r,a){var o=r.resources,i=o.fetching,l=o.data,u=e.some(function(e){var t=e.name,n=e.options;return i[t]&&i[t][s(n,a)]}),d={},p=void 0,m=[];e.forEach(function(e){var r=e.name,o=e.options,i=e.key;if(l[r]){var u=s(o,a);if(n[r]||(u in l[r]?f.default.increment("webapp.withResource.cache-hit",.05,{resource:r,cache_size:Object.keys(l[r]).length,level:"success",v:1,component:c(t)}):Object.keys(l[r]).length?f.default.increment("webapp.withResource.populated-cache-miss",1,{resource:r,cache_size:Object.keys(l[r]).length,level:"error",v:1,component:c(t)}):f.default.increment("webapp.withResource.empty-cache-miss",.1,{resource:r,cache_size:Object.keys(l[r]).length,level:"warn",v:1,component:c(t)})),n[r]=!0,l[r][u]){var h=l[r][u],v=h.data,g=h.nextBookmark,b=h.error;d[i]=v,m.push(g),b&&(p=b)}}else f.default.increment("webapp.withResource.no-cache",1,{resource:r,cache_size:0,level:"error",v:1,component:c(t)})});var h=e.every(function(e){var t=e.key;return void 0!==d[t]});return{resourceLoaded:h,isAtEnd:h&&!u&&m.every(function(e){return"-end-"===e}),isFetching:u,nextBookmark:m[0],resourceData:d,error:p}}}},E=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var c,l;return l=c=function(c){function l(){var e,r,i;a(this,l);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return e=r=o(this,c.call.apply(c,[this].concat(d))),r.loadData=function(e){var r=n;t.forEach(function(t){var n=t.options,a=t.name,o="function"==typeof n?n(e):n;e.dispatch(Object(g.a)(a,o,void 0,void 0,r.traceLoggerHandlerName))})},r.loadMoreData=function(e){var r=n;t.forEach(function(t){var n=t.options,a=t.name,o="function"==typeof n?n(e):n;e.dispatch(Object(g.d)(a,o,void 0,void 0,r.traceLoggerHandlerName))})},r.resourcesHash=JSON.stringify(t.map(function(e){return Object.assign({},e,{options:s(e.options,r.props)})})),i=e,o(r,i)}return i(l,c),l.prototype.componentDidMount=function e(){!1!==n.allowStale?this.props.resourceLoaded||this.loadData(this.props):this.loadData(this.props)},l.prototype.shouldComponentUpdate=function e(t){for(var n=[].concat(Object.keys(this.props),Object.keys(t)),r=Array.isArray(n),a=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(a>=n.length)break;o=n[a++]}else{if((a=n.next()).done)break;o=a.value}var i=o;if("resourceData"===i){if(!b(this.props.resourceData,t.resourceData))return!0}else if(this.props[i]!==t[i])return!0}return!1},l.prototype.UNSAFE_componentWillUpdate=function e(n){!this.props.resourceLoaded&&n.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&n.error&&this.props.onResourceError&&this.props.onResourceError(n.error);var r=JSON.stringify(t.map(function(e){return Object.assign({},e,{options:s(e.options,n)})}));this.resourcesHash!==r&&(this.loadData(n),this.resourcesHash=r)},l.prototype.render=function t(){var n=this,a=this.props,o=a.error,i=a.isAtEnd,s=a.isFetching,c=a.resourceData,l=a.resourceLoaded,d=r(a,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete d.onResourceError,delete d.onResourceLoaded,u.createElement(e,Object.assign({},c,d,{error:o,fetchMoreData:function e(){return n.loadMoreData(n.props)},isAtEnd:i,isFetching:s,refreshData:function e(){return n.loadData(n.props)},resourceLoaded:l}))},l}(u.Component),c.WrappedComponent=e,c.displayName=1===t.length?t[0].name:t.length+" resources",l}},_=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var r={name:t.name,options:t.options||{},key:t.key||"data"};return Object(p.connect)(y(e)([r]))(E([r],n)(e))}},w=_;t.b=_;var C=function e(t){var n=t.name,r=t.options;return function(e,t){var a=e.resources.data;if(a[n]){var o=s(r,t);if(a[n][o])return{data:a[n][o].data}}return{data:null}}}},tZWC:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("d6ZO"),u=n.n(l),d=n("DUIN"),p=n("GGB8"),m=n.n(p),f=n("PrM5"),h=n("W/Cr"),v=n("XSNT"),g=n("IaRT"),b=n.n(g),y=n("z/23"),E=n("9bGG"),_=n("gEaE"),w=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=a(this,e.call.apply(e,[this].concat(c))),o.renderInviteButton=function(e){var t=o.props.inviteQueue;if(!t)return null;var n={text:h.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(n.text=h.a._("Remove","Remove a board collaborator invite"),n.color="gray"),u.a.createElement(_.c,n)},i=n,a(o,i)}return o(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()},t.prototype.render=function e(){var t=this.props,n=t.is_pinner?h.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?h.a._("Facebook"):"gplus_non_pinner"===t.type?h.a._("Google"):h.a._("Enter an email address");return u.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),u.a.createElement(_.b,{position:"relative"},t.send_pin_image?u.a.createElement("span",{className:"typeaheadImg"},u.a.createElement("img",{alt:"",src:t.send_pin_image})):null,u.a.createElement("p",{className:m()("typeaheadName",{hasImage:t.send_pin_image})},t.label),u.a.createElement("div",{className:"titleWrapper"},u.a.createElement("i",{className:m()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),u.a.createElement("p",{className:"title"},n)),u.a.createElement(_.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(t.id))))},t}(l.Component),C=Object(E.a)(w),I=n("NfjA"),O=n("Svvu"),N=n("skut"),k=n("Kqaz"),S=n("Cjb7"),R=n("5tOk"),j=n("T0l7"),T=[O.a.FACEBOOK,O.a.TWITTER,O.a.GPLUS],x=function(e){function t(){var n,r,a;i(this,t);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return n=r=s(this,e.call.apply(e,[this].concat(c))),r.state={networks:r.props.viewer.isAuth?r.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]},r.onUserInviteClick=function(e){var t=e.id,n=e.full_name,a=r.props,o=a.boardId,i=a.onInviteItemClick;o?i(Object(j.d)(o,[t]),{type:"user",userName:n}):i(e,!0)},r.handleBodyClick=function(e){r._results.contains(e.target)||r.setState({open:!1})},r.handleTypeaheadSuggestionsChange=function(e){var t=r.props.viewer;r.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})},r.handleOnEmailInviteClick=function(){var e=r.props,t=e.boardId,n=e.onInviteItemClick,a=e.value;t?n(Object(j.c)(t,[a]),{type:"email",email:a}):n(a,!1)},r.subscriber=S.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){r.setState({networks:Object(f.a)(n)})}),r.logTypeaheadInput=function(e){(0,r.props.contextLog)(4113,{component:13029,element:1043,entered_query:e})},r.logSearchContactItemClick=function(e){var t=r.props;(0,t.contextLog)(101,{component:13029,element:1044,entered_query:t.value,result_index:e})},r.renderResultItems=function(){var e=r.props,t=e.changeOnTextHover,n=e.inviteQueue,a=m()("Typeahead","userSelect",{open:r.state.open}),o=r.state.typeaheadSuggestions.map(function(e,a){return u.a.createElement(C,Object.assign({key:a,onClick:function t(){r.onUserInviteClick(e),r.logSearchContactItemClick(a)},onHoverEnd:function e(){return t?r.restoreTextFieldValue():null},onHoverStart:function n(){return t?r.forceTextFieldValue(e.label):null},inviteQueue:n},e))}).concat(r.getStaticItems()).map(function(e,t){return u.a.createElement("li",{key:t},e)});return u.a.createElement("div",{className:a,ref:function e(t){r._results=t},style:{overflow:"auto",zIndex:1e3}},u.a.createElement("ul",null,o))},a=n,s(r,a)}return c(t,e),t.prototype.componentDidMount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})},t.prototype.UNSAFE_componentWillReceiveProps=function e(t){var n=t.value;this.setState({open:n.length>0})},t.prototype.componentWillUnmount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()},t.prototype.getStaticItems=function e(){return[].concat(this.getEmailItems(),this.getSocialItems(this.state.networks))},t.prototype.getEmailItems=function e(){var t=this.props.value;return[u.a.createElement(y.a,{email:t,isValid:Object(R.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]},t.prototype.getSocialItems=function e(t){return T.filter(function(e){return!t||!1===t[e].connected}).map(function(e,t){return u.a.createElement(I.a,{key:"socialConnect-"+e,network:e})})},t.prototype.forceTextFieldValue=function e(t){this.previousValue=this.props.value,this.props.onChange(t)},t.prototype.restoreTextFieldValue=function e(){this.props.onChange(this.previousValue),delete this.previousValue},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardId,a=n.className,o=n.inBoardCollaboratorInviter,i=n.onChange,s=n.onKeyDown,c=n.showInputPlaceholder,l=n.value,d=m()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),p=r?{board:r}:null;return u.a.createElement(N.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:p,value:l},u.a.createElement("div",{className:m()(a,"reactSocialTypeahead")},u.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},u.a.createElement(v.a,{className:d,id:"collaboratorInviterTypeahead",onChange:function e(n){i(n),t.logTypeaheadInput(n)},onKeyDown:s,placeholder:c?h.a._("Name or email","search"):null,value:l,focused:!0})),this.renderResultItems()))},t}(l.Component);x.defaultProps={changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0};var A=function e(t){return{viewer:t.viewer}},B=t.a=Object(k.a)(Object(d.connect)(A)(x))},"z/23":function(e,t,n){"use strict";function r(e){var t=e.email,n=e.isValid,r=e.onClick,o=e.showSendEmailText,i=n?a.createElement("div",{className:"icon"},t[0].toUpperCase()):a.createElement("div",{className:s()("icon","typingEmail")},a.createElement("em",null)),l=n?c.a._("Click to send!"):c.a._("Keep typing!"),u=o?Object(d.h)(c.a._("Email {{ email }}"),{email:t}):Object(d.h)(c.a._("Invite {{ email }}"),{email:t});return a.createElement("div",{className:s()("sendToEmail",{unclickable:!n})},a.createElement("a",{className:"selectableEmailItem",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){n&&r()}),role:"button"},a.createElement("div",{className:"left"},i),a.createElement("div",{className:"right"},a.createElement("h4",{className:"title"},u),a.createElement("p",{className:"subtitle"},l))))}t.a=r;var a=n("d6ZO"),o=n.n(a),i=n("GGB8"),s=n.n(i),c=n("W/Cr"),l=n("IaRT"),u=n.n(l),d=n("5tOk")}});