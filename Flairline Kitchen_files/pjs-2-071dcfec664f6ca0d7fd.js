webpackJsonp([2],{wPXL:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Hgnz"),o=r("qMd0"),i=r("WjSu"),_=r("Z96g"),n=r("XPQe"),s=r("WPZK"),u=r("EAiy"),p={},E=18e5,l=0,T=1.23,c=10,d=1;p.BASE_URL_PATH="/_/_/report/",p.BASE_URL_PATH_TRACE="/_/_/trace/",p.SERVER_LOG_TYPE={LOG:"log",WARNING:"warning",ERROR:"error",PAGE_LOAD_METRIC:"page_load_metric",INTERACTION_TIMING:"interaction_timing",APP_METRIC:"app_metric",BROWSER_EXTENSION:"browser_extension",RENDER_TIME:"render_time",NETWORK_LOAD:"network_load",SIGNUP_LOAD:"signup_load",TRACE:"trace"},p.HTTP_METHOD={GET:"get",POST:"post"};var g=function e(t,r){if(!/password/i.test(t))return r},R=function e(t,r,_,E){var l=void 0;l="trace"===t?p.BASE_URL_PATH_TRACE+t+"/":p.BASE_URL_PATH+t+"/",E&&(_.timeElapsed=Date.now()-E),t&&(_.logType=t);var T=s.a.getActiveTarget(),c={app_version:o.a.currentVersion,current_url:window.location.href,app_invalid:o.a.isNewVersionRequired(),page_load_request_identifier:i.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER,active_target:T?T.getFullName():"",user:{advertiser_id:i.a.instance.advertiser?i.a.instance.advertiser.id:"",unauth_id:i.a.instance.unauth_id?i.a.instance.unauth_id:"",user_id:u.a.get("id")||""}},d=p._assembleXhrData(c,_);return _.isMobile&&t===p.SERVER_LOG_TYPE.PAGE_LOAD_METRIC&&n.a.log("logToServer.mobile_page_load_metric.sending",1,{browser:_.browser,upwt_name:_.upwt&&_.upwt.name,upwt_cause:_.upwt&&_.upwt.cause,upwt_stop_reason:_.upwt&&_.upwt.stop_reason}),new Promise(function(e,t){Object(a.a)({url:l,type:r,data:d,error:t,success:e})})};p._assembleXhrData=function(e,t){var r=void 0;try{r=JSON.stringify(t,g)}catch(e){r=JSON.stringify({messages:[e.toString()]})}return{report_context:JSON.stringify(e,g),report_data:r}},p.logToServer=function(e,t,r,a,o,i){a=void 0===a?0:a,o=void 0===o?1:o,R(e,t,r,i=void 0===i?void 0:o).then(function(){},function(_,s,u){if(a){a-=1;var E=Math.min(18e5,1.23*o);setTimeout(function(){p.logToServer(e,t,r,a,E,i)},o)}else{a-=1;var l={messages:["Failed to log error"],logType:e,method:t,textStatus:s,serverErrorText:u,jqXhrStatus:_.status};R(p.SERVER_LOG_TYPE.ERROR,"post",l),r.isMobile&&e===p.SERVER_LOG_TYPE.PAGE_LOAD_METRIC&&n.a.log("logToServer.mobile_page_load_metric.error",1,{browser:r.browser,upwt_name:r.upwt&&r.upwt.name,upwt_cause:r.upwt&&r.upwt.cause,upwt_stop_reason:r.upwt&&r.upwt.stop_reason})}})},p.logPerfDataToServer=p.logToServer,p.logToServer=_.a.maxCalls(p.logToServer,10),t.default=p}});